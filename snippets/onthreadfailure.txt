console.log(`status = ${error.status}. Unable to add the prompt to the thread`);
    console.log('will try to cancel the last run');
    console.log(error);
    if (error.status === 400 && assistant.metadata.lastRunId !== '0') {
      try {
        run = await openai.beta.threads.runs.cancel(thread.id, assistant.metadata.lastRunId);
        assistant = await openai.beta.assistants.update(assistant.id, {
          metadata: { thread_id: thread.id, lastRunId: run.id }})
        gptControl.assistant = assistant;
        console.log("Cancelled the last run");
      } catch (error) {
        console.log('Unable to cancel the last run');
        console.log(error);
      }
    } else {
      await openai.beta.threads.del(thread.id);
      thread = await openai.beta.threads.create({
        metadata: { assistanceName: assistant.name, lastRunId: '0'},
      });
      gptControl.thread = thread;
      console.log("Deleted old thread and created a new one");
      
    }