<html lang="en">
<head><meta charset="utf-8">
<script src="https://unpkg.com/@sassoftware/openai-assistantjs@dev/dist/index.umd.js"></script>

<script>
  console.log(assistantjs);
  console.log(openai);
  let gptControl;
</script>
<script>
  function setup() {
    let config = {
    provider:  'openai', /* azureai is coming soon */
    server: 'none', /* none, local, or a url to a server */
    assistantName: 'SAS_ASSISTANT_BASIC', /* ex: SAS_ASSISTANT. Reuse name to keep costs down */
    instructions :  'You are assistant who can do calculations', /* instructions for the assistant. Ignored if assistant exists */
    model: 'gpt-4-turbo', /* the gpt model you want to use */
    reuseThread: true, /* if false it will create a new thread. else will use the specified threadid */
    threadid:  'thread_YpBGqqx46Tzs9Uxq0RoFynPW', /* Unfortunately there is no api to manage threads. So reusing might be a good option (with its drawbacks)*/
    credentials: {/* credentials for openai or azureai */
      openaiKey: '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',
      azureaiKey: '',
      azureaiEndpoint: ''
    },
    specs: {
      tools: [
      {type: 'retrieval'},
      {type: 'code_interpreter'}
    ],
    functionList: {}
    }
  }
  console.log(assistantjs);
  assistantjs.setupAssistant(config)
  .then ((r)=> {
    gptControl = r;
    console.log(gptControl);
  })
  .catch ((e)=> {
    console.log(e);
  })
}
</script>
<script>
  function onClick() {
    let text = document.getElementById('prompt').value;
    runAssistant(text, {}, gptControl)
    .then (r => {
      debugger;
      document.getElementById('log').innerHTML += r + '<br>';
    })
    .catch (e => {
      document.getElementById('log').innerHTML += e + '<br>';
    })
  }
</script>
<style>
  .box {
  width: 80vh;
  height: 60vh;
  border: 1px solid black;
  padding: 2px 4px;
  overflow-y: scroll;
  overflow-x: auto;
}
.box2 {
  border: 1px solid black;
  padding: 2px 4px;
}
.log {
  margin-top: 8px;
  font-family: monospace;
}

</style>
</head>

<body onload="setup()">
  <h2> Quick test of OpenAI Assistant.js</h2>
  <div class=""box2">
  <textarea id="prompt" name="prompt" rows="4" cols="90"></textarea>
  <button onclick="onClick()"">Run</button>
  </div>
  <br>
  <div class="box">
    <label for="log">Answer</label>
    <div class="log" id="log"></div>
  </div>

</body>
</html>